{% extends 'base.html' %}
{% block title %}Peminjaman Saya{% endblock %}

{% block content %}
<div>
  <h1 class="text-3xl font-semibold">Peminjaman Saya</h1>
</div>

<div class="bg-white rounded-3xl shadow-sm p-6">
  <div class="overflow-x-auto">
    {% if bookings %}
    <table class="w-full">
      <thead class="bg-gray-50 border-b border-gray-200">
        <tr>
          <th class="px-6 py-4 text-left text-gray-700">Ruangan</th>
          <th class="px-6 py-4 text-left text-gray-700">Tanggal</th>
          <th class="px-6 py-4 text-left text-gray-700">Waktu</th>
          <th class="px-6 py-4 text-left text-gray-700">Keperluan</th>
          <th class="px-6 py-4 text-left text-gray-700">Status</th>
        </tr>
      </thead>

      {% for b in bookings %}
      <tbody class="divide-y divide-gray-200">
        <tr class="hover:bg-gray-50">
          <td class="px-6 py-4 text-gray-900">
            {{ b.room.name }}
          </td>

          <td class="px-6 py-4 text-gray-600">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg"
                   width="24" height="24" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round"
                   class="lucide lucide-calendar w-4 h-4 text-gray-400"
                   aria-hidden="true">
                <path d="M8 2v4"></path>
                <path d="M16 2v4"></path>
                <rect width="18" height="18" x="3" y="4" rx="2"></rect>
                <path d="M3 10h18"></path>
              </svg>
              {{ b.date }}
            </div>
          </td>

          <td class="px-6 py-4 text-gray-600">
            <div class="flex items-center gap-2">
              <svg xmlns="http://www.w3.org/2000/svg"
                   width="24" height="24" viewBox="0 0 24 24"
                   fill="none" stroke="currentColor" stroke-width="2"
                   stroke-linecap="round" stroke-linejoin="round"
                   class="lucide lucide-clock w-4 h-4 text-gray-400"
                   aria-hidden="true">
                <path d="M12 6v6l4 2"></path>
                <circle cx="12" cy="12" r="10"></circle>
              </svg>
              {{ b.start_time|time:"H:i" }} - {{ b.end_time|time:"H:i" }}
            </div>
          </td>

          <td class="px-6 py-4 text-gray-600 max-w-xs truncate">
            {{ b.purpose }}
          </td>

          <td class="px-6 py-4">
            {% if b.is_expired %}
              <span class="px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-800">
                Expired
              </span>
            {% elif b.status == 'menunggu' %}
              <span class="px-3 py-1 rounded-full text-sm bg-yellow-100 text-yellow-800">
                Menunggu
              </span>
            {% elif b.status == 'disetujui' %}
              <span class="px-3 py-1 rounded-full text-sm bg-green-100 text-green-800">
                Disetujui
              </span>
            {% elif b.status == 'ditolak' %}
              <span class="px-3 py-1 rounded-full text-sm bg-red-100 text-red-800">
                Ditolak
              </span>
            {% endif %}
          </td>
        </tr>
      </tbody>
      {% endfor %}
    </table>

    {% else %}
    <div class="text-center py-12">
      <svg xmlns="http://www.w3.org/2000/svg"
           width="48" height="48" viewBox="0 0 24 24"
           fill="none" stroke="currentColor" stroke-width="2"
           stroke-linecap="round" stroke-linejoin="round"
           class="lucide lucide-inbox w-12 h-12 text-gray-400 mx-auto mb-4"
           aria-hidden="true">
        <polyline points="22 12 18 12 15 21 9 21 6 12 2 12"></polyline>
        <path d="M6 12H2v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6h-4"></path>
      </svg>
      <h3 class="text-lg font-semibold text-gray-700 mb-2">
        Tidak ada booking ditemukan
      </h3>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}
